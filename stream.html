<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Stream - MethStreams</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #ff6b35;
            --secondary: #4ecdc4;
            --dark: #0c0f1d;
            --darker: #070a15;
            --light: #ffffff;
            --gray: #b0b7c8;
        }

        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .stream-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .player-area {
            display: flex;
            gap: 20px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stream-player {
            flex: 1;
            min-width: 300px;
            height: 500px;
            border-radius: 15px;
            background: #000;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
            overflow: hidden;
            position: relative;
        }

        .stream-player iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .player-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: white;
            text-align: center;
            padding: 2rem;
        }

        /* Ad Space Styles */
        .ad-space {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 2px dashed var(--primary);
            text-align: center;
        }

        .ad-label {
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .ad-banner {
            width: 100%;
            max-width: 728px;
            height: 90px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin: 0 auto;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ad-banner:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .ad-square {
            width: 300px;
            height: 250px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin: 0 auto;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ad-square:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .ad-sidebar {
            width: 100%;
            max-width: 300px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ad-sidebar-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .ad-sidebar-item:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .stream-info {
            background: rgba(255, 255, 255, 0.06);
            padding: 1.5rem;
            border-radius: 12px;
            backdrop-filter: blur(6px);
            margin-bottom: 2rem;
        }

        .stream-info h2 {
            color: var(--primary);
            font-size: 1.4rem;
            margin-bottom: 1rem;
        }

        .stream-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .meta-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.8rem;
            border-radius: 8px;
            text-align: center;
        }

        .meta-label {
            font-size: 0.85rem;
            color: var(--gray);
            margin-bottom: 0.3rem;
        }

        .meta-value {
            font-size: 1rem;
            font-weight: 600;
        }

        .back-btn {
            display: inline-block;
            padding: 12px 25px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            margin-bottom: 2rem;
            transition: 0.3s;
        }

        .back-btn:hover {
            background: #ff8e62;
            transform: scale(1.05);
        }

        /* Channel Selector */
        .channel-selector {
            background: rgba(255, 255, 255, 0.06);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .channel-selector h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .channel-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .channel-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .channel-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--primary);
        }

        .channel-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }

        /* Loading Animation */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #333;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px 0;
        }

        /* Stream Status */
        .stream-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
        }

        /* Articles Section */
        .articles-section {
            margin-top: 3rem;
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .article-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        .article-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .article-card h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .article-card p {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .stream-player {
                height: 300px;
            }

            .player-area {
                flex-direction: column;
            }

            .channel-buttons {
                flex-direction: column;
            }

            .ad-sidebar {
                max-width: 100%;
            }

            .ad-banner {
                height: 60px;
                font-size: 0.9rem;
            }

            .ad-square {
                width: 250px;
                height: 200px;
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <div class="stream-container">
        <div class="header">
            <h1 id="page-title">Live Stream - MethStreams</h1>
        </div>

        <a href="index.html" class="back-btn">‚Üê Back to All Streams</a>

        <!-- Top Ad Banner -->
        <div class="ad-space">
            <span class="ad-label">Advertisement</span>
            <div class="ad-banner" onclick="openAdLink('banner_top')">
                üéØ Premium Sports Streaming - Watch in HD Quality
            </div>
        </div>

        <!-- Channel Selector -->
        <div class="channel-selector">
            <h3>Select Stream Channel</h3>
            <div class="channel-buttons" id="channel-buttons">
                <!-- Channels will be loaded dynamically -->
            </div>
        </div>

        <div class="player-area">
            <!-- Left Sidebar Ads -->
            <div class="ad-sidebar">
                <div class="ad-label" style="margin-bottom: 0.5rem;">Sponsored</div>
                <div class="ad-sidebar-item" onclick="openAdLink('sidebar_1')">
                    <strong>üèà NFL Game Pass</strong>
                    <p style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--gray);">Watch Every Game Live</p>
                </div>
                <div class="ad-sidebar-item" onclick="openAdLink('sidebar_2')">
                    <strong>üèÄ NBA League</strong>
                    <p style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--gray);">HD Streaming Available</p>
                </div>
                <div class="ad-sidebar-item" onclick="openAdLink('sidebar_3')">
                    <strong>‚öΩ Soccer Pass</strong>
                    <p style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--gray);">All Leagues Covered</p>
                </div>
            </div>

            <!-- Main Stream Player -->
            <div class="stream-player" id="stream-iframe">
                <div class="player-placeholder" id="player-placeholder">
                    <h3>Loading Stream...</h3>
                    <p>Please wait while we initialize your stream</p>
                    <div class="loading-spinner"></div>
                    <div class="stream-status">
                        <div class="status-indicator"></div>
                        <span>Connecting to server...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Middle Ad Square -->
        <div class="ad-space">
            <span class="ad-label">Featured Partner</span>
            <div class="ad-square" onclick="openAdLink('square_middle')">
                <div style="text-align: center;">
                    <div style="font-size: 1.2rem; margin-bottom: 0.5rem;">üöÄ MethStreams Pro</div>
                    <div style="font-size: 0.9rem;">Ad-Free Experience</div>
                    <div style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--gray);">Upgrade Now</div>
                </div>
            </div>
        </div>

        <div class="stream-info">
            <h2 id="event-title">Live Sports Event</h2>
            <div class="stream-meta">
                <div class="meta-item">
                    <div class="meta-label">League</div>
                    <div class="meta-value" id="event-league">Multiple Sports</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Status</div>
                    <div class="meta-value" id="event-status">CONNECTING</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Quality</div>
                    <div class="meta-value" id="event-quality">HD</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Channel</div>
                    <div class="meta-value" id="event-channel">Channel 1</div>
                </div>
            </div>
        </div>

        <!-- Bottom Ad Banner -->
        <div class="ad-space">
            <span class="ad-label">Advertisement</span>
            <div class="ad-banner" onclick="openAdLink('banner_bottom')">
                üì± Download Our Mobile App - Stream Anywhere, Anytime
            </div>
        </div>

        <!-- MethStreams Articles Section -->
        <div class="articles-section">
            <h2 style="color: var(--primary); margin-bottom: 1rem;">MethStreams Sports Guides</h2>
            <div class="articles-grid">
                <div class="article-card">
                    <h3>How to Watch NFL on MethStreams</h3>
                    <p>Complete guide to streaming NFL games live on MethStreams. Watch all Sunday games, Monday Night
                        Football, and Super Bowl for free.</p>
                </div>
                <div class="article-card">
                    <h3>NBA Streaming Guide 2024</h3>
                    <p>Watch every NBA game live - regular season, playoffs, and finals. HD quality streams with
                        multiple channel options.</p>
                </div>
                <div class="article-card">
                    <h3>MLB Live Streams Free</h3>
                    <p>Never miss a pitch with MethStreams MLB coverage. All teams, all games, completely free
                        streaming.</p>
                </div>
                <div class="article-card">
                    <h3>Premier League Football</h3>
                    <p>Watch Manchester United, Liverpool, Arsenal and all Premier League matches live in HD quality.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const channelsParam = urlParams.get('channels');
        const league = urlParams.get('league');
        const title = urlParams.get('title');

        // Default channels if no specific embed URL provided
        const defaultChannels = [
            { name: 'Channel 1 (HD)', url: 'https://lotusgamehd.xyz/lotushd.php?hd=246' },
            { name: 'Channel 2 (Backup)', url: 'https://lotusgamehd.xyz/lotushd.php?hd=247' },
            { name: 'Channel 3 (Mobile)', url: 'https://lotusgamehd.xyz/lotushd.php?hd=248' },
            { name: 'Channel 4 (Premium)', url: 'https://lotusgamehd.xyz/lotushd.php?hd=249' }
        ];

        // Ad click handler
        function openAdLink(adType) {
            const adLinks = {
                'banner_top': 'https://example.com/premium-streaming',
                'banner_bottom': 'https://example.com/mobile-app',
                'square_middle': 'https://example.com/pro-upgrade',
                'sidebar_1': 'https://example.com/nfl-pass',
                'sidebar_2': 'https://example.com/nba-league',
                'sidebar_3': 'https://example.com/soccer-pass'
            };

            const link = adLinks[adType] || 'https://example.com';
            window.open(link, '_blank');
            console.log('ü§ë Ad clicked:', adType);
        }

        // Update Channel Selector based on Event
        function updateChannelSelector(channelData) {
            const channelButtons = document.getElementById('channel-buttons');
            channelButtons.innerHTML = '';

            if (channelData && channelData.embedUrls && channelData.channelNames) {
                channelData.embedUrls.forEach((url, index) => {
                    const button = document.createElement('button');
                    button.className = `channel-btn ${index === 0 ? 'active' : ''}`;
                    button.setAttribute('data-embed', url);
                    button.textContent = channelData.channelNames[index] || `Channel ${index + 1}`;
                    
                    button.addEventListener('click', function() {
                        document.querySelectorAll('.channel-btn').forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        loadStream(url, this.textContent);
                    });
                    
                    channelButtons.appendChild(button);
                });
            } else {
                // Default channels if no specific data
                defaultChannels.forEach((channel, index) => {
                    const button = document.createElement('button');
                    button.className = `channel-btn ${index === 0 ? 'active' : ''}`;
                    button.setAttribute('data-embed', channel.url);
                    button.textContent = channel.name;
                    
                    button.addEventListener('click', function() {
                        document.querySelectorAll('.channel-btn').forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        loadStream(channel.url, this.textContent);
                    });
                    
                    channelButtons.appendChild(button);
                });
            }
        }

        // Initialize Page with Event Channels
        function initializePage() {
            const urlParams = new URLSearchParams(window.location.search);
            const channelsParam = urlParams.get('channels');
            const title = urlParams.get('title');
            const league = urlParams.get('league');

            if (title) {
                document.getElementById('page-title').textContent = title + ' - MethStreams';
                document.getElementById('event-title').textContent = title;
            }

            if (league) {
                document.getElementById('event-league').textContent = league;
            }

            // Parse channel data
            let channelData = null;
            if (channelsParam) {
                try {
                    channelData = JSON.parse(decodeURIComponent(channelsParam));
                } catch (e) {
                    console.error('Error parsing channel data:', e);
                }
            }

            // Update channel selector
            updateChannelSelector(channelData);

            // Update status to LIVE
            const statusElement = document.getElementById('event-status');
            statusElement.textContent = 'LIVE';
            statusElement.style.color = '#00ff00';

            // Auto-load stream
            autoLoadStream(channelData);
        }

        // Auto-load stream with event channels
        function autoLoadStream(channelData) {
            let streamToLoad = '';
            let channelName = 'Channel 1';

            if (channelData && channelData.embedUrls && channelData.embedUrls.length > 0) {
                streamToLoad = channelData.embedUrls[0];
                channelName = channelData.channelNames[0] || 'Channel 1';
            } else {
                // Default fallback
                streamToLoad = defaultChannels[0].url;
                channelName = defaultChannels[0].name;
            }

            document.getElementById('event-channel').textContent = channelName;
            loadStream(streamToLoad, channelName);
        }

        // Load Stream Function
        function loadStream(embedUrl, channelName) {
            const streamContainer = document.getElementById('stream-iframe');
            const placeholder = document.getElementById('player-placeholder');
            const statusElement = document.getElementById('event-status');
            const channelElement = document.getElementById('event-channel');

            if (embedUrl && embedUrl !== '') {
                // Show loading state
                statusElement.textContent = 'LOADING';
                statusElement.style.color = '#ffa726';
                channelElement.textContent = channelName;

                // Update loading message
                if (placeholder) {
                    placeholder.innerHTML = `
                        <h3>Loading Stream...</h3>
                        <p>Initializing ${channelName}</p>
                        <div class="loading-spinner"></div>
                        <div class="stream-status">
                            <div class="status-indicator" style="background: #ffa726;"></div>
                            <span>Buffering stream...</span>
                        </div>
                    `;
                }

                // Create iframe
                const iframe = document.createElement('iframe');
                iframe.src = embedUrl;
                iframe.width = '100%';
                iframe.height = '100%';
                iframe.frameBorder = '0';
                iframe.allowFullscreen = true;
                iframe.style.border = 'none';
                iframe.allow = 'autoplay; fullscreen; encrypted-media';

                // Add loading event listener to iframe
                iframe.onload = function () {
                    // Stream loaded successfully
                    statusElement.textContent = 'LIVE';
                    statusElement.style.color = '#00ff00';

                    if (placeholder) {
                        placeholder.style.display = 'none';
                    }

                    console.log('üé• Stream loaded successfully:', channelName);
                };

                iframe.onerror = function () {
                    // Stream failed to load
                    showError('Failed to load stream. Please try another channel.');
                    statusElement.textContent = 'ERROR';
                    statusElement.style.color = '#ff4444';
                };

                // Clear container and add iframe
                streamContainer.innerHTML = '';
                streamContainer.appendChild(iframe);

                console.log('üé• Loading stream:', channelName, embedUrl);

                // Fallback: If stream doesn't load within 10 seconds, show error
                setTimeout(() => {
                    if (statusElement.textContent === 'LOADING') {
                        showError('Stream is taking longer than expected. Please try another channel.');
                        statusElement.textContent = 'TIMEOUT';
                        statusElement.style.color = '#ff4444';
                    }
                }, 10000);

            } else {
                showError('Invalid stream URL');
                statusElement.textContent = 'ERROR';
                statusElement.style.color = '#ff4444';
            }
        }

        function showError(message) {
            const streamContainer = document.getElementById('stream-iframe');
            streamContainer.innerHTML = `
                <div class="player-placeholder">
                    <h3>Stream Error</h3>
                    <p>${message}</p>
                    <p style="margin-top:20px;color:#ff6b35;">Please try another channel</p>
                    <div class="channel-buttons" style="margin-top: 20px;">
                        <button class="channel-btn" onclick="loadStream('https://lotusgamehd.xyz/lotushd.php?hd=246', 'Channel 1')">Try Channel 1</button>
                        <button class="channel-btn" onclick="loadStream('https://lotusgamehd.xyz/lotushd.php?hd=247', 'Channel 2')">Try Channel 2</button>
                    </div>
                </div>
            `;
        }

        // Auto-load when page loads
        window.addEventListener('load', initializePage);

        // Add keyboard shortcuts for quick channel switching
        document.addEventListener('keydown', (e) => {
            if (e.altKey) {
                const channelButtons = document.querySelectorAll('.channel-btn');
                switch (e.key) {
                    case '1':
                        if (channelButtons[0]) channelButtons[0].click();
                        break;
                    case '2':
                        if (channelButtons[1]) channelButtons[1].click();
                        break;
                    case '3':
                        if (channelButtons[2]) channelButtons[2].click();
                        break;
                    case '4':
                        if (channelButtons[3]) channelButtons[3].click();
                        break;
                }
            }
        });

        // Make functions globally available for error recovery
        window.loadStream = loadStream;
        window.openAdLink = openAdLink;
    </script>
</body>

</html>